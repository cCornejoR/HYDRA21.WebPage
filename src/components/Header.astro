---
// Header.astro
---

<header class="fixed top-0 left-0 right-0 z-50 bg-black/95 backdrop-blur-lg border-b border-gray-800">
  <nav class="container mx-auto px-4 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo -->
      <div class="flex items-center space-x-3">
        <img
          src="/pipe_logo.svg"
          alt="HYDRA²¹ Logo"
          class="h-8 w-auto"
        />
        <span class="font-bold text-white text-xl tracking-tight">
          <span class="gradient-text-blue-cyan">HYDRA²¹</span>
        </span>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <nav class="flex items-center space-x-8">
          <a href="#pricing" class="text-gray-300 hover:text-white transition-colors duration-200 font-medium">
            Pricing
          </a>
          <a href="#features" class="text-gray-300 hover:text-white transition-colors duration-200 font-medium">
            Features
          </a>
          <a href="#enterprise" class="text-gray-300 hover:text-white transition-colors duration-200 font-medium">
            Enterprise
          </a>
          <a href="#blog" class="text-gray-300 hover:text-white transition-colors duration-200 font-medium">
            Blog
          </a>
          <a href="#forum" class="text-gray-300 hover:text-white transition-colors duration-200 font-medium">
            Forum
          </a>
          <a href="#careers" class="text-gray-300 hover:text-white transition-colors duration-200 font-medium">
            Careers
          </a>
        </nav>
      </div>

      <!-- Right Side - User & Download -->
      <div class="flex items-center space-x-4">
        <!-- User Icon (Desktop) -->
        <button class="hidden lg:flex items-center justify-center w-10 h-10 rounded-full bg-gray-800 hover:bg-gray-700 transition-colors duration-200">
          <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </button>

        <!-- Download Button - Hidden below 500px -->
        <button class="hidden min-[500px]:flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 transform hover:scale-105">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          <span>Download</span>
        </button>

        <!-- Mobile Menu Button -->
        <label id="mobile-menu-button" class="min-[500px]:lg:hidden flex flex-col gap-2 w-8 cursor-pointer" aria-label="Abrir menú">
          <input id="mobile-menu-checkbox" class="peer hidden" type="checkbox" />
          <div
            class="rounded-2xl h-[3px] w-1/2 bg-white duration-500 peer-checked:rotate-[225deg] origin-right peer-checked:-translate-x-[12px] peer-checked:-translate-y-[1px]"
          ></div>
          <div
            class="rounded-2xl h-[3px] w-full bg-white duration-500 peer-checked:-rotate-45"
          ></div>
          <div
            class="rounded-2xl h-[3px] w-1/2 bg-white duration-500 place-self-end peer-checked:rotate-[225deg] origin-left peer-checked:translate-x-[12px] peer-checked:translate-y-[1px]"
          ></div>
        </label>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="lg:hidden hidden bg-black/95 border-t border-gray-800">
      <div class="px-4 pt-4 pb-6 space-y-4">
        <a href="#pricing" class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          Pricing
        </a>
        <a href="#features" class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          Features
        </a>
        <a href="#enterprise" class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          Enterprise
        </a>
        <a href="#blog" class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          Blog
        </a>
        <a href="#forum" class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          Forum
        </a>
        <a href="#careers" class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          Careers
        </a>
        
        <!-- Mobile User Section -->
        <div class="pt-4 border-t border-gray-800">
          <button class="flex items-center space-x-3 text-gray-300 hover:text-white transition-colors duration-200 py-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
            <span>Mi Cuenta</span>
          </button>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
    // Enhanced mobile menu functionality with cool animations
  document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
    const mobileMenuCheckbox = document.getElementById('mobile-menu-checkbox') as HTMLInputElement;

    function closeMenu() {
      if (!mobileMenu || !mobileMenuCheckbox) return;
      
      // Animate out
      const menuContent = mobileMenu.querySelector('.relative') as HTMLElement;
      if (menuContent) {
        menuContent.style.animation = 'slideOutToLeft 0.3s ease-in forwards';
      }
      
      if (mobileMenuBackdrop) {
        (mobileMenuBackdrop as HTMLElement).style.animation = 'fadeOut 0.3s ease-out forwards';
      }
      
      setTimeout(() => {
        mobileMenu.classList.add('hidden');
        mobileMenuCheckbox.checked = false;
        document.body.style.overflow = '';
      }, 300);
    }

    if (mobileMenuButton && mobileMenu && mobileMenuCheckbox) {
      
      function openMenu() {
        if (!mobileMenu) return;
        
        mobileMenu.classList.remove('hidden');
        mobileMenuCheckbox.checked = true;
        
        // Animate backdrop
        if (mobileMenuBackdrop) {
          const backdrop = mobileMenuBackdrop as HTMLElement;
          backdrop.style.opacity = '0';
          backdrop.style.animation = 'fadeIn 0.3s ease-out forwards';
        }
        
        // Animate menu content
        const menuContent = mobileMenu.querySelector('.relative') as HTMLElement;
        if (menuContent) {
          menuContent.style.transform = 'translateX(-100%)';
          menuContent.style.animation = 'slideInFromLeft 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards';
        }
        
        // Animate menu items with stagger effect
        const menuItems = mobileMenu.querySelectorAll('a, button');
        menuItems.forEach((item, index) => {
          const element = item as HTMLElement;
          element.style.opacity = '0';
          element.style.transform = 'translateY(20px)';
          element.style.animation = `fadeInUp 0.5s ease-out ${index * 0.1}s forwards`;
        });
        
        // Prevent body scroll
        document.body.style.overflow = 'hidden';
      }

      mobileMenuCheckbox.addEventListener('change', function() {
        if (mobileMenuCheckbox.checked) {
          openMenu();
        } else {
          closeMenu();
        }
      });

      // Close menu when clicking on links
      const mobileLinks = mobileMenu.querySelectorAll('a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', function() {
          closeMenu();
        });
      });
      
      // Close menu when clicking backdrop
      if (mobileMenuBackdrop) {
        mobileMenuBackdrop.addEventListener('click', function() {
          closeMenu();
        });
      }
    }

    // Close mobile menu when clicking outside
    document.addEventListener('click', function(event) {
      if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
        const isClickInsideMenu = mobileMenu.contains(event.target as Node);
        const isClickOnButton = mobileMenuButton && mobileMenuButton.contains(event.target as Node);
        
        if (!isClickInsideMenu && !isClickOnButton) {
          closeMenu();
        }
      }
    });

    // Handle scroll effects
    let lastScrollY = window.scrollY;
    const header = document.querySelector('header');

    window.addEventListener('scroll', () => {
      const currentScrollY = window.scrollY;
      
      if (header) {
        if (currentScrollY > lastScrollY && currentScrollY > 100) {
          // Scrolling down
          header.style.transform = 'translateY(-100%)';
        } else {
          // Scrolling up
          header.style.transform = 'translateY(0)';
        }
        
        // Add/remove background blur based on scroll
        if (currentScrollY > 50) {
          header.classList.add('bg-black/98');
          header.classList.remove('bg-black/95');
        } else {
          header.classList.add('bg-black/95');
          header.classList.remove('bg-black/98');
        }
      }
      
      lastScrollY = currentScrollY;
    });
  });
</script>

<style>
  header {
    transition: transform 0.3s ease-in-out, background-color 0.3s ease;
  }

  .gradient-text-blue-cyan {
    background: linear-gradient(135deg, #3b82f6, #06b6d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Smooth hover transitions */
  nav a {
    position: relative;
  }

  nav a::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 50%;
    background: linear-gradient(135deg, #3b82f6, #06b6d4);
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }

  nav a:hover::after {
    width: 100%;
  }

  /* Enhanced Mobile menu animations */
  #mobile-menu {
    animation: slideDown 0.3s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }

  @keyframes slideInFromLeft {
    from { transform: translateX(-100%); }
    to { transform: translateX(0); }
  }

  @keyframes slideOutToLeft {
    from { transform: translateX(0); }
    to { transform: translateX(-100%); }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Enhanced hover effects for mobile menu */
  #mobile-menu a:hover {
    text-shadow: 0 0 8px rgba(34, 211, 238, 0.6);
  }

  /* Responsive adjustments */
  @media (max-width: 1023px) {
    .container {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
</style>

